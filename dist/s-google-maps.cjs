"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const n=require("./svelte.js");var O=function s(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var o,i,l;if(Array.isArray(t)){if(o=t.length,o!=e.length)return!1;for(i=o;i--!==0;)if(!s(t[i],e[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();if(l=Object.keys(t),o=l.length,o!==Object.keys(e).length)return!1;for(i=o;i--!==0;)if(!Object.prototype.hasOwnProperty.call(e,l[i]))return!1;for(i=o;i--!==0;){var r=l[i];if(!s(t[r],e[r]))return!1}return!0}return t!==t&&e!==e};const v="__googleMapsScriptId";var C;(function(s){s[s.INITIALIZED=0]="INITIALIZED",s[s.LOADING=1]="LOADING",s[s.SUCCESS=2]="SUCCESS",s[s.FAILURE=3]="FAILURE"})(C||(C={}));class k{constructor({apiKey:t,authReferrerPolicy:e,channel:o,client:i,id:l=v,language:r,libraries:a=[],mapIds:c,nonce:d,region:h,retries:u=3,url:p="https://maps.googleapis.com/maps/api/js",version:f}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=e,this.channel=o,this.client=i,this.id=l||v,this.language=r,this.libraries=a,this.mapIds=c,this.nonce=d,this.region=h,this.retries=u,this.url=p,this.version=f,k.instance){if(!O(this.options,k.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(k.instance.options)}`);return k.instance}k.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?C.FAILURE:this.done?C.SUCCESS:this.loading?C.LOADING:C.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let t=this.url;return t+=`?callback=${this.CALLBACK}`,this.apiKey&&(t+=`&key=${this.apiKey}`),this.channel&&(t+=`&channel=${this.channel}`),this.client&&(t+=`&client=${this.client}`),this.libraries.length>0&&(t+=`&libraries=${this.libraries.join(",")}`),this.language&&(t+=`&language=${this.language}`),this.region&&(t+=`&region=${this.region}`),this.version&&(t+=`&v=${this.version}`),this.mapIds&&(t+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(t+=`&auth_referrer_policy=${this.authReferrerPolicy}`),t}deleteScript(){const t=document.getElementById(this.id);t&&t.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((t,e)=>{this.loadCallback(o=>{o?e(o.error):t(window.google)})})}loadCallback(t){this.callbacks.push(t),this.execute()}setScript(){if(document.getElementById(this.id)){this.callback();return}const t=this.createUrl(),e=document.createElement("script");e.id=this.id,e.type="text/javascript",e.src=t,e.onerror=this.loadErrorCallback.bind(this),e.defer=!0,e.async=!0,this.nonce&&(e.nonce=this.nonce),document.head.appendChild(e)}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(t){if(this.errors.push(t),this.errors.length<=this.retries){const e=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${e} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},e)}else this.onerrorEvent=t,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(t=>{t(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}let y=null;async function E(s,t=[]){if(y)return;y=await new k({apiKey:s,libraries:t}).load()}const D={load:E,gmapApi:y};function I(s){let t;const e=s[12].default,o=n.create_slot(e,s,s[11],null);return{c(){o&&o.c()},m(i,l){o&&o.m(i,l),t=!0},p(i,l){o&&o.p&&(!t||l&2048)&&n.update_slot_base(o,e,i,i[11],t?n.get_slot_changes(e,i[11],l,null):n.get_all_dirty_from_scope(i[11]),null)},i(i){t||(n.transition_in(o,i),t=!0)},o(i){n.transition_out(o,i),t=!1},d(i){o&&o.d(i)}}}function G(s){let t,e,o,i,l=s[0]&&I(s);return{c(){t=n.element("div"),e=n.element("div"),o=n.space(),l&&l.c(),n.attr(e,"style",s[2]),n.attr(e,"class","s-google-map__container svelte-hsj0b5"),n.attr(t,"style",s[3]),n.attr(t,"class","s-google-map__wrapper")},m(r,a){n.insert(r,t,a),n.append(t,e),s[13](e),n.append(t,o),l&&l.m(t,null),i=!0},p(r,[a]){(!i||a&4)&&n.attr(e,"style",r[2]),r[0]?l?(l.p(r,a),a&1&&n.transition_in(l,1)):(l=I(r),l.c(),n.transition_in(l,1),l.m(t,null)):l&&(n.group_outros(),n.transition_out(l,1,1,()=>{l=null}),n.check_outros()),(!i||a&8)&&n.attr(t,"style",r[3])},i(r){i||(n.transition_in(l),i=!0)},o(r){n.transition_out(l),i=!1},d(r){r&&n.detach(t),s[13](null),l&&l.d()}}}function P(s,t,e){let o,i,{$$slots:l={},$$scope:r}=t,{width:a}=t,{height:c}=t,{borderRadius:d="0"}=t,{zoom:h=null}=t,{options:u}=t,{center:p=null}=t;n.setContext("map",{getMap:()=>m});let f=!1,m=null,S=null;const b=n.createEventDispatcher();let _=null,w=null,L=null;n.onMount(()=>{!S||!y||(e(10,m=new y.maps.Map(S)),_=m.addListener("click",g=>{b("click",g)}),w=m.addListener("dragend",()=>{e(5,p=m.getCenter().toJSON())}),L=m.addListener("zoom_changed",()=>{e(4,h=m.getZoom())}),e(0,f=!0))}),n.onDestroy(()=>{e(10,m=null),_&&_.remove(),w&&w.remove(),L&&L.remove()});function M(g){n.binding_callbacks[g?"unshift":"push"](()=>{S=g,e(1,S)})}return s.$$set=g=>{"width"in g&&e(6,a=g.width),"height"in g&&e(7,c=g.height),"borderRadius"in g&&e(8,d=g.borderRadius),"zoom"in g&&e(4,h=g.zoom),"options"in g&&e(9,u=g.options),"center"in g&&e(5,p=g.center),"$$scope"in g&&e(11,r=g.$$scope)},s.$$.update=()=>{s.$$.dirty&192&&e(3,o=`width: ${a}; height: ${c}`),s.$$.dirty&448&&e(2,i=`width: ${a}; height: ${c}; border-radius: ${d}`),s.$$.dirty&1584&&(m&&m.setOptions(u),m&&h&&m.setZoom(h),m&&p&&m.setCenter(p))},[f,S,i,o,h,p,a,c,d,u,m,r,l,M]}class R extends n.SvelteComponent{constructor(t){super(),n.init(this,t,P,G,n.safe_not_equal,{width:6,height:7,borderRadius:8,zoom:4,options:9,center:5})}}function A(s,t,e){let{radius:o=null}=t,{center:i=null}=t,{options:l=null}=t;const{getMap:r}=n.getContext("map"),a=r(),c=n.createEventDispatcher(),d=new y.maps.Circle({map:a}),h=d.addListener("radius_changed",()=>{e(0,o=d.getRadius())}),u=d.addListener("center_changed",()=>{e(1,i=d.getCenter().toJSON())}),p=d.addListener("click",f=>{c("click",f)});return n.onDestroy(()=>{d.setMap(null),p.remove(),u.remove(),h.remove()}),s.$$set=f=>{"radius"in f&&e(0,o=f.radius),"center"in f&&e(1,i=f.center),"options"in f&&e(2,l=f.options)},s.$$.update=()=>{s.$$.dirty&7&&(o&&d.setRadius(o),i&&d.setCenter(i),l&&d.setOptions(l))},[o,i,l]}class j extends n.SvelteComponent{constructor(t){super(),n.init(this,t,A,null,n.safe_not_equal,{radius:0,center:1,options:2})}}function N(s){let t;const e=s[3].default,o=n.create_slot(e,s,s[2],null);return{c(){o&&o.c()},m(i,l){o&&o.m(i,l),t=!0},p(i,[l]){o&&o.p&&(!t||l&4)&&n.update_slot_base(o,e,i,i[2],t?n.get_slot_changes(e,i[2],l,null):n.get_all_dirty_from_scope(i[2]),null)},i(i){t||(n.transition_in(o,i),t=!0)},o(i){n.transition_out(o,i),t=!1},d(i){o&&o.d(i)}}}function q(s,t,e){let{$$slots:o={},$$scope:i}=t,{options:l=null}=t,{position:r=null}=t;const{getMap:a}=n.getContext("map");n.setContext("marker",{getMarker:()=>h});const c=a(),d=n.createEventDispatcher(),h=new y.maps.Marker({map:c}),u=h.addListener("mouseup",()=>{e(0,r=h.getPosition().toJSON())}),p=h.addListener("click",f=>{d("click",f)});return n.onDestroy(()=>{h.setMap(null),p.remove(),u.remove()}),s.$$set=f=>{"options"in f&&e(1,l=f.options),"position"in f&&e(0,r=f.position),"$$scope"in f&&e(2,i=f.$$scope)},s.$$.update=()=>{s.$$.dirty&3&&(l&&h.setOptions(l),r&&h.setPosition(r))},[r,l,i,o]}class U extends n.SvelteComponent{constructor(t){super(),n.init(this,t,q,N,n.safe_not_equal,{options:1,position:0})}}function J(s,t,e){let{options:o=null}=t;const{getMap:i}=n.getContext("map"),l=i(),r=new y.maps.visualization.HeatmapLayer({map:l});return n.onDestroy(()=>{r.setMap(null)}),s.$$set=a=>{"options"in a&&e(0,o=a.options)},s.$$.update=()=>{s.$$.dirty&1&&o&&r.setOptions(o)},[o]}class z extends n.SvelteComponent{constructor(t){super(),n.init(this,t,J,null,n.safe_not_equal,{options:0})}}function F(s,t,e){let{path:o=null}=t,{options:i=null}=t;const{getMap:l}=n.getContext("map"),r=l(),a=n.createEventDispatcher(),c=new y.maps.Polygon({map:r}),d=c.addListener("mouseup",()=>{e(0,o=c.getPath().getArray().map(u=>u.toJSON()))}),h=c.addListener("click",u=>{a("click",u)});return n.onDestroy(()=>{c.setMap(null),h.remove(),d.remove()}),s.$$set=u=>{"path"in u&&e(0,o=u.path),"options"in u&&e(1,i=u.options)},s.$$.update=()=>{s.$$.dirty&3&&(o&&c.setPath(o),i&&c.setOptions(i))},[o,i]}class K extends n.SvelteComponent{constructor(t){super(),n.init(this,t,F,null,n.safe_not_equal,{path:0,options:1})}}function T(s,t,e){let{path:o=null}=t,{options:i=null}=t;const{getMap:l}=n.getContext("map"),r=l(),a=n.createEventDispatcher(),c=new y.maps.Polyline({map:r}),d=c.addListener("mouseup",()=>{e(0,o=c.getPath().getArray().map(u=>u.toJSON()))}),h=c.addListener("click",u=>{a("click",u)});return n.onDestroy(()=>{c.setMap(null),h.remove(),d.remove()}),s.$$set=u=>{"path"in u&&e(0,o=u.path),"options"in u&&e(1,i=u.options)},s.$$.update=()=>{s.$$.dirty&3&&(o&&c.setPath(o),i&&c.setOptions(i))},[o,i]}class B extends n.SvelteComponent{constructor(t){super(),n.init(this,t,T,null,n.safe_not_equal,{path:0,options:1})}}function W(s,t,e){let{options:o=null}=t,{bounds:i=null}=t;const{getMap:l}=n.getContext("map"),r=l(),a=n.createEventDispatcher(),c=new y.maps.Rectangle({map:r}),d=c.addListener("bounds_changed",()=>{e(0,i=c.getBounds().toJSON())}),h=c.addListener("click",u=>{a("click",u)});return n.onDestroy(()=>{c.setMap(null),h.remove(),d.remove()}),s.$$set=u=>{"options"in u&&e(1,o=u.options),"bounds"in u&&e(0,i=u.bounds)},s.$$.update=()=>{s.$$.dirty&3&&(i&&c.setBounds(i),o&&c.setOptions(o))},[i,o]}class Z extends n.SvelteComponent{constructor(t){super(),n.init(this,t,W,null,n.safe_not_equal,{options:1,bounds:0})}}function H(s){let t,e,o,i;const l=s[4].default,r=n.create_slot(l,s,s[3],null);return{c(){t=n.element("template"),e=n.element("div"),o=n.element("div"),r&&r.c(),n.attr(e,"class","s-google-info-window__container svelte-51y2q4")},m(a,c){n.insert(a,t,c),n.append(t.content,e),n.append(e,o),r&&r.m(o,null),s[5](o),i=!0},p(a,[c]){r&&r.p&&(!i||c&8)&&n.update_slot_base(r,l,a,a[3],i?n.get_slot_changes(l,a[3],c,null):n.get_all_dirty_from_scope(a[3]),null)},i(a){i||(n.transition_in(r,a),i=!0)},o(a){n.transition_out(r,a),i=!1},d(a){a&&n.detach(t),r&&r.d(a),s[5](null)}}}function Q(s,t,e){let{$$slots:o={},$$scope:i}=t,{show:l=!1}=t,{options:r=null}=t;const{getMap:a}=n.getContext("map"),c=n.getContext("marker"),d=a(),h=(c==null?void 0:c.getMarker())??null;let u=null;const p=new y.maps.InfoWindow;n.onMount(()=>{p.setContent(u)});let f=null;h&&(f=h.addListener("click",()=>e(1,l=!l)));const m=p.addListener("closeclick",()=>e(1,l=!1));function S(_){_?p.open({map:d,anchor:h}):p.close()}n.onDestroy(()=>{p.close(),m.remove(),f==null||f.remove()});function b(_){n.binding_callbacks[_?"unshift":"push"](()=>{u=_,e(0,u)})}return s.$$set=_=>{"show"in _&&e(1,l=_.show),"options"in _&&e(2,r=_.options),"$$scope"in _&&e(3,i=_.$$scope)},s.$$.update=()=>{s.$$.dirty&4&&r&&p.setOptions(r),s.$$.dirty&2&&S(l)},[u,l,r,i,o,b]}class V extends n.SvelteComponent{constructor(t){super(),n.init(this,t,Q,H,n.safe_not_equal,{show:1,options:2})}}exports.SGoogleCircle=j;exports.SGoogleHeatmap=z;exports.SGoogleInfoWindow=V;exports.SGoogleMap=R;exports.SGoogleMarker=U;exports.SGooglePolygon=K;exports.SGooglePolyline=B;exports.SGoogleRectangle=Z;exports.gmapLoader=D;
